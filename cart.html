<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>DomPlus ‚Äì –ö–æ—à–Ω–∏—Ü–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial,sans-serif;margin:0;background:#f4f4f4}
header{background:#111;color:#fff;padding:20px;text-align:center}
.container{max-width:1000px;margin:auto;padding:20px}
.cart-item{
    display:flex;
    align-items:center;
    background:#fff;
    margin-bottom:15px;
    padding:15px;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1)
}
.cart-item img{
    width:100px;
    height:80px;
    object-fit:cover;
    border-radius:6px;
    margin-right:15px
}
.cart-details{flex:1}
.qty-controls button{
    padding:5px 10px;
    font-size:16px;
    margin:0 5px;
}
.cart-actions button{
    background:#e63946;
    color:#fff;
    border:none;
    padding:8px 12px;
    border-radius:5px;
    cursor:pointer
}
.total{
    background:#fff;
    padding:20px;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
    text-align:right;
    font-size:20px;
    margin-top:20px
}
form{
    background:#fff;
    padding:20px;
    border-radius:8px;
    margin-top:20px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1)
}
form input, form textarea, form select{
    width:100%;
    padding:10px;
    margin:8px 0;
    font-size:16px
}
form button{
    background:#1d3557;
    color:#fff;
    border:none;
    padding:12px;
    font-size:18px;
    border-radius:5px;
    cursor:pointer;
    width:100%
}
.empty{text-align:center;font-size:20px;margin-top:40px}
a{color:white;text-decoration:none}
</style>
</head>
<body>

<header>
<h1>üõí –ö–æ—à–Ω–∏—Ü–∞ ‚Äì DomPlus</h1>
<p><a href="index.html">‚¨Ö –û–±—Ä–∞—Ç–Ω–æ –∫—ä–º –º–∞–≥–∞–∑–∏–Ω–∞</a></p>
</header>

<div class="container" id="cart-container"></div>

<form
id="orderForm"
action="https://docs.google.com/forms/d/e/1FAIpQLSdZEXO7-9dUGkGqOwWVCxuhe9ytA4Io35l0plXtniCAdLRuKQ/formResponse"
method="POST">

<input type="hidden" name="entry.1614692332" id="orderData">

<input type="text" name="entry.696596733" placeholder="–ê–¥—Ä–µ—Å" required>
<input type="tel" name="entry.1463389063" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
<textarea name="entry.142323037" placeholder="–ë–µ–ª–µ–∂–∫–∞ –∫—ä–º –ø–æ—Ä—ä—á–∫–∞—Ç–∞"></textarea>

<select name="entry.803736456" required>
    <option value="">–ö—É—Ä–∏–µ—Ä—Å–∫–∞ —Ñ–∏—Ä–º–∞</option>
    <option value="–ï–∫–æ–Ω—Ç">–ï–∫–æ–Ω—Ç</option>
    <option value="–°–ø–∏–¥–∏">–°–ø–∏–¥–∏</option>
</select>

<input type="text" name="entry.416079699" placeholder="–ò–º–µ" required>

<button type="submit">–ò–∑–ø—Ä–∞—Ç–∏ –ø–æ—Ä—ä—á–∫–∞—Ç–∞</button>
</form>

<script>
// –í–∑–µ–º–∞–Ω–µ –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
let cart = JSON.parse(localStorage.getItem("cart")) || [];
const container = document.getElementById("cart-container");
const form = document.getElementById("orderForm");
const orderData = document.getElementById("orderData");

// –ó–∞–ø–∏—Å –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
function saveCart(){
    localStorage.setItem("cart", JSON.stringify(cart));
}

// –†–µ–Ω–¥–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
function renderCart(){
    container.innerHTML = "";

    if(cart.length === 0){
        container.innerHTML = "<p class='empty'>–ö–æ—à–Ω–∏—Ü–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞</p>";
        return;
    }

    let total = 0;
    let text = "";

    cart.forEach((item,index)=>{
        total += item.price * item.qty;
        text += `${item.name} x ${item.qty} = ${item.price * item.qty} –ª–≤\n`;

        const div = document.createElement("div");
        div.className = "cart-item";

        div.innerHTML = `
            <img src="${item.image}">
            <div class="cart-details">
                <h3>${item.name}</h3>
                <p>–¶–µ–Ω–∞: ${item.price} –ª–≤</p>
                <div class="qty-controls">
                    <button onclick="changeQty(${index},-1)">‚àí</button>
                    <strong>${item.qty}</strong>
                    <button onclick="changeQty(${index},1)">+</button>
                </div>
                <p><strong>${item.price * item.qty} –ª–≤</strong></p>
            </div>
            <div class="cart-actions">
                <button onclick="removeItem(${index})">‚úñ</button>
            </div>
        `;
        container.appendChild(div);
    });

    container.innerHTML += `<div class="total">–û–±—â–∞ —Å—É–º–∞: <strong>${total} –ª–≤</strong></div>`;
    orderData.value = text + `\n–û–ë–©–û: ${total} –ª–≤`;
}

// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
function changeQty(index,delta){
    cart[index].qty += delta;
    if(cart[index].qty <= 0) cart.splice(index,1);
    saveCart();
    renderCart();
}

// –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ
function removeItem(index){
    cart.splice(index,1);
    saveCart();
    renderCart();
}

// –ù–∞—á–∞–ª–Ω–æ
renderCart();

// ‚úÖ –û–ë–ù–û–í–ï–ù SUBMIT ‚Äì –±–µ–∑ Google —Å—ä–æ–±—â–µ–Ω–∏–µ
form.addEventListener("submit", function(e){
    e.preventDefault();

    fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        mode: "no-cors"
    });

    cart = [];
    saveCart();
    renderCart();

    form.style.display = "none";

    const msg = document.createElement("p");
    msg.style.textAlign = "center";
    msg.style.fontSize = "22px";
    msg.style.marginTop = "30px";
    msg.innerText = "–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞! –©–µ —Å–µ —Å–≤—ä—Ä–∂–µ–º —Å –≤–∞—Å —Å–∫–æ—Ä–æ.";
    form.parentNode.insertBefore(msg, form.nextSibling);
});
</script>

</body>
</html>
