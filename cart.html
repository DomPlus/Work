<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>DomPlus – Кошница</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial,sans-serif; margin:0; background:#f4f4f4; color:#333; }
header { background:#111; color:white; padding:30px 15px; text-align:center; }
header h1 { font-size:2.5em; margin:0; }
.container { max-width:900px; margin:auto; padding:20px; }
.cart-item { display:flex; justify-content: space-between; align-items:center; margin-bottom:15px; background:#fff; padding:10px 15px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
.cart-item span { flex:1; }
.cart-item input { width:60px; text-align:center; margin:0 10px; }
.cart-item button { background:#e63946; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; }
.cart-item button:hover { background:#d62828; }
.cart-total { font-weight:bold; font-size:18px; margin-top:20px; text-align:right; }
.back-btn { margin-top:20px; padding:10px 15px; font-size:16px; background:#1d3557; color:white; border:none; border-radius:5px; cursor:pointer; }
.back-btn:hover { background:#457b9d; }
</style>
</head>
<body>

<header>
<h1>Вашата кошница</h1>
</header>

<div class="container" id="cartContainer">
<!-- Артикулите ще се зареждат тук -->
</div>

<div class="container">
<div class="cart-total" id="cartTotal">Обща цена: 0 лв</div>
<button class="back-btn" onclick="window.location.href='index.html'">← Продължи пазаруването</button>
</div>

<script>
// Зареждане на кошницата от localStorage
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartContainer = document.getElementById('cartContainer');
const cartTotalEl = document.getElementById('cartTotal');

function saveCart(){
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();
}

// Функция за показване на артикулите
function renderCart(){
  cartContainer.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    const itemDiv = document.createElement('div');
    itemDiv.className = 'cart-item';
    itemDiv.innerHTML = `
      <span>${item.name}</span>
      <input type="number" min="1" value="${item.qty}" data-index="${index}">
      <span>${item.price * item.qty} лв</span>
      <button data-index="${index}">✖</button>
    `;
    cartContainer.appendChild(itemDiv);

    total += item.price * item.qty;
  });

  cartTotalEl.textContent = `Обща цена: ${total} лв`;

  // Добавяне на събития за изтриване
  document.querySelectorAll('.cart-item button').forEach(btn => {
    btn.addEventListener('click', function(){
      const i = parseInt(this.dataset.index);
      cart.splice(i,1);
      saveCart();
    });
  });

  // Добавяне на събития за промяна на количеството
  document.querySelectorAll('.cart-item input').forEach(input => {
    input.addEventListener('change', function(){
      const i = parseInt(this.dataset.index);
      let val = parseInt(this.value);
      if(val < 1) val = 1;
      cart[i].qty = val;
      saveCart();
    });
  });
}

// Първоначално рендериране
renderCart();
</script>

</body>
</html>
