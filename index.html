<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>DomPlus – Онлайн магазин</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial,sans-serif; margin:0; background:#f4f4f4; color:#333; }
header { background:#111; color:white; padding:30px 15px; text-align:center; }
header h1 { font-size:2.5em; }
.container { max-width:1100px; margin:auto; padding:20px; }
.products { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; }
.product { background:white; padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); text-align:center; }
.product img { width:100%; max-height:200px; object-fit:cover; border-radius:6px; }
.price { font-size:22px; color:#e63946; margin:10px 0; }
button { background:#1d3557; color:white; border:none; padding:12px 20px; font-size:16px; border-radius:5px; cursor:pointer; margin-top:5px; }
button:hover { background:#457b9d; }
.cart-container { background:white; padding:20px; margin-top:40px; border-radius:8px; }
.cart-item { display:flex; justify-content: space-between; margin-bottom:10px; }
.cart-total { font-weight:bold; font-size:18px; margin-top:10px; }
input, select, textarea { width:100%; padding:10px; margin:8px 0; font-size:16px; }
label { font-weight:bold; display:block; margin-top:10px; }
</style>
</head>
<body>

<header>
<h1>DomPlus</h1>
<p>Практични продукти за дома • Плащане при получаване • Бърза доставка</p>
</header>

<div class="container">

<div class="products">
    <div class="product" data-name="Сгъваем органайзер за дрехи" data-price="29">
        <img src="https://via.placeholder.com/400x250?text=Органайзер+за+дрехи">
        <h3>Сгъваем органайзер за дрехи</h3>
        <p>Повече място и ред в гардероба.</p>
        <div class="price">29 лв</div>
        <input type="number" value="1" min="1" class="qty">
        <button class="add-to-cart">Добави в кошницата</button>
    </div>

    <div class="product" data-name="LED нощна лампа" data-price="24">
        <img src="https://via.placeholder.com/400x250?text=LED+лампа">
        <h3>LED нощна лампа със сензор</h3>
        <p>Светва автоматично при движение.</p>
        <div class="price">24 лв</div>
        <input type="number" value="1" min="1" class="qty">
        <button class="add-to-cart">Добави в кошницата</button>
    </div>

    <div class="product" data-name="Кухненски органайзер" data-price="34">
        <img src="https://via.placeholder.com/400x250?text=Кухненски+органайзер">
        <h3>Кухненски органайзер</h3>
        <p>Ред и удобство във всяко чекмедже.</p>
        <div class="price">34 лв</div>
        <input type="number" value="1" min="1" class="qty">
        <button class="add-to-cart">Добави в кошницата</button>
    </div>
</div>

<!-- Кошница + форма -->
<div class="cart-container" id="cartContainer">
<h2>Вашата кошница</h2>
<div id="cartItems"></div>
<div class="cart-total" id="cartTotal">Обща цена: 0 лв</div>

<h3>Данни за поръчка</h3>
<form id="orderForm">
<label>Име:</label>
<input type="text" name="Име" required>

<label>Телефон:</label>
<input type="tel" name="Телефон" required>

<label>Адрес:</label>
<input type="text" name="Адрес" required>

<label>Куриерска фирма:</label>
<select name="Куриер" required>
    <option value="">Избери куриер</option>
    <option value="Econt">Econt</option>
    <option value="Speedy">Speedy</option>
    <option value="SPARK">SPARK</option>
</select>

<label>Бележка / допълнителна информация:</label>
<textarea name="Бележка"></textarea>

<button type="submit">Изпрати поръчката</button>
</form>
</div>

</div>

<footer>
© 2026 DomPlus – Всички права запазени
</footer>

<script>
// ---- JS за кошницата ----
let cart = [];

function updateCart() {
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");
    cartItems.innerHTML = "";
    let total = 0;
    cart.forEach((item, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "cart-item";
        itemDiv.innerHTML = `
            <span>${item.name} x ${item.qty} = ${item.price*item.qty} лв</span>
            <button onclick="removeItem(${index})">✖</button>
        `;
        cartItems.appendChild(itemDiv);
        total += item.price*item.qty;
    });
    cartTotal.textContent = `Обща цена: ${total} лв`;
}

function removeItem(index) {
    cart.splice(index,1);
    updateCart();
}

document.querySelectorAll(".add-to-cart").forEach(btn=>{
    btn.addEventListener("click", function(){
        const product = this.closest(".product");
        const name = product.dataset.name;
        const price = parseFloat(product.dataset.price);
        const qty = parseInt(product.querySelector(".qty").value);
        if(qty < 1) return;
        // Ако продуктът вече е в cart → увеличаваме количество
        const existing = cart.find(i=>i.name===name);
        if(existing){ existing.qty += qty; }
        else { cart.push({name, price, qty}); }
        updateCart();
    });
});

// ---- JS за submit към Google Form ----
const form = document.getElementById("orderForm");
form.addEventListener("submit", function(e){
    e.preventDefault();
    if(cart.length===0){ alert("Кошницата е празна!"); return; }

    const nameVal = this.querySelector('[name="Име"]').value;
    const phoneVal = this.querySelector('[name="Телефон"]').value;
    const addressVal = this.querySelector('[name="Адрес"]').value;
    const courierVal = this.querySelector('[name="Куриер"]').value;
    const noteVal = this.querySelector('[name="Бележка"]').value;

    // Подготвяме текст със всички продукти
    const productsText = cart.map(i=>`${i.name} x ${i.qty}`).join(", ");

    // Изпращане към Google Form
    fetch("https://docs.google.com/forms/d/e/1NYBLOh4S90ZPxWpaIVCaGY0efo_5a3nUC4mSmCbWvVE/formResponse",{
        method:"POST",
        mode:"no-cors",
        body: new URLSearchParams({
            "entry.520885605": productsText,   // Продукти от кошницата
        "entry.896637083": nameVal,        // Име
        "entry.1626456706": phoneVal,      // Телефон
        "entry.452652446": addressVal,     // Адрес
        "entry.1628531338": noteVal,       // Бележка / доп. информация
        "entry.1111111111": courierVal     // Куриерска фирма (замени с реалното entry ID от pre-fi
        })
    });

    // Pixel tracking
    if(typeof fbq!=="undefined") fbq('track','Purchase');
    if(typeof ttq!=="undefined") ttq.track('CompletePayment');

    // Redirect
    window.location.href="thank-you.html";
});
</script>

</body>
</html>

